"use strict";var angularApp=angular.module("angularModule",[]);angularApp.controller("testController",function($scope){$scope.testMessage="MESSAGE HERE"}),angularApp.controller("assetsController",function($scope,pageService){$scope.test="CLICK";var dummyAssets={total:20,assets:[{latitude:11.99,longitude:99.11,location:"501 Privet Dr",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"22 Broadway",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"88 3rd Ave",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"111 23rd St",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"907 East Blvd",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"56 7th Ave",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"45 MLK Blvd",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"391 20th Ave",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"123 Sesame St",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"322 Broadchurch Lane",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"31 Agony Place",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"212 Timid Deer Path",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"702 Hobbiton Lane",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"61 Vanilla Expressway",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"426 Greenwich Plaza",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"601 Nightly Place",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"45 St Anne's Blvd",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"802 Yahtzee Road",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"1852 East 18th St",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444},{latitude:11.99,longitude:99.11,location:"205 5th Ave",media:"Big ol' billboard",copy_size:"50X40",cpm:3.555444}]},currentPage=1,pages=pageService.allPages(dummyAssets.assets,2);console.log(pages),$scope.assetsPage=pages[currentPage-1],$scope.buttonList=pageService.centerPageRange(pages.length,currentPage),$scope.changePage=function(pageNumber,index){if("..."===pageNumber){var scrollAmount=0===index?-1:1;$scope.buttonList=pageService.scrollRange(pages.length,$scope.buttonList,scrollAmount)}else currentPage=pageNumber,$scope.assetsPage=pages[currentPage-1],$scope.buttonList=pageService.centerPageRange(pages.length,currentPage)},$scope.prevPage=function(){currentPage>1&&$scope.changePage(currentPage-1)},$scope.nextPage=function(){currentPage<pages.length&&$scope.changePage(currentPage+1)}}),angularApp.factory("pageService",function(){var DEFAULTBUTTONS=8,range=function(start,stop){for(var numbersInRange=[],i=start;i<stop;i++)numbersInRange.push(i);return numbersInRange},addElipsisButtons=function(pageRange,totalPages,maxButtons){return maxButtons=maxButtons||DEFAULTBUTTONS,pageRange[0]>1&&(pageRange[0]="..."),pageRange[pageRange.length-1]<totalPages&&pageRange.length===maxButtons&&(pageRange[pageRange.length-1]="..."),pageRange};return{pageRange:function(totalPages){return range(1,totalPages+1)},elementsOnPage:function(elements,elementsPerPage,pageNum){return elements.slice(elementsPerPage*pageNum-elementsPerPage,elementsPerPage*pageNum)},allPages:function(elements,elementsPerPage){for(var totalPages=Math.ceil(elements.length/elementsPerPage),pages=[],i=0;i<totalPages;i++)pages.push(this.elementsOnPage(elements,elementsPerPage,i+1));return pages},centerPageRange:function(totalPages,initialPageIndex,maxButtons){maxButtons=maxButtons||DEFAULTBUTTONS;var centerButton=Math.floor(maxButtons/2)+1,startPage=Math.max(0,initialPageIndex-centerButton),endPage=startPage+maxButtons;endPage>totalPages&&(startPage-=endPage-totalPages);var centeredRange=this.pageRange(totalPages).slice(startPage,endPage);return addElipsisButtons(centeredRange,totalPages)},scrollRange:function scrollRange(totalPages,visibleButtons,scrollAmount,maxButtons){maxButtons=maxButtons||DEFAULTBUTTONS;var fullPageRange=this.pageRange(totalPages),startPage=Math.max(1,visibleButtons[1]+scrollAmount-1),endPage=startPage+(visibleButtons.length-1);endPage>totalPages&&(startPage-=endPage-totalPages);var scrollRange=fullPageRange.slice(startPage-1,startPage-1+visibleButtons.length);return addElipsisButtons(scrollRange,totalPages)}}});